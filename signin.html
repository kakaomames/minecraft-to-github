<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Minecraft Web - User Registration Portal">
    <link rel="icon" href="https://kakaomames.github.io/rei/logo.png">
    <title>æ–°è¦ç™»éŒ² - Minecraft Web</title>
    <style>
        body { background: #1a1a1a; color: white; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .reg-box { background: #333; padding: 30px; border: 2px solid #555; width: 300px; text-align: center; }
        input { width: 90%; padding: 10px; margin: 10px 0; background: #444; border: 1px solid #666; color: white; }
        .btn { width: 100%; padding: 12px; background: #3c8527; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <div class="reg-box">
        <img src="https://kakaomames.github.io/rei/logo.png" width="60">
        <h2>æ–°è¦éšŠå“¡ç™»éŒ²</h2>
        <input type="text" id="username" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼å">
        <input type="password" id="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
        <button class="btn" id="signin-btn">ç™»éŒ²ã—ã¦ä¸–ç•Œã‚’å‰µã‚‹</button>
        ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿ<a href="login">ãƒ­ã‚°ã‚¤ãƒ³</a>
    </div>

    <script>
        // Signin.html å†…ã® <script> éƒ¨åˆ† ğŸš€
document.getElementById('signin-btn').onclick = async () => {
    const u = document.getElementById('username').value;
    const p = document.getElementById('password').value;
    
    if(!u || !p) { alert("å…¥åŠ›ãŒè¶³ã‚Šã¾ã›ã‚“ï¼"); return; }

    console.log("--- ç™»éŒ²ãƒ—ãƒ­ã‚»ã‚¹é–‹å§‹ ---");
    console.log(`target_user:${u}`);

    try {
        const response = await fetch('https://xeroxapp032.vercel.app/api/register', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username: u, password: p })
        });

        const result = await response.json();
        // a = result.status ã®å€¤ã‚’ç¢ºå®š
        console.log(`api_response_status:${result.status}`);

        if (result.status === "success") {
            alert("éšŠå“¡ç™»éŒ²å®Œäº†ï¼ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸ç§»è¡Œã—ã¾ã™ã€‚");
            // ç™»éŒ²æˆåŠŸå¾Œã®é·ç§»
            window.location.href = 'login.html';
        } else {
            alert("ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸã€‚GitHubã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
        }
    } catch (error) {
        console.error("Connection Error:", error);
    }
};
    </script>
</body>
</html>
